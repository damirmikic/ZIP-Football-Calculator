<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZIP Correct Score Calculator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="main-container">
        <!-- Header -->
        <header>
            <h1>ZIP Correct Score Calculator</h1>
            <p class="subtitle">Zero-Inflated Poisson Model for Football Odds Modelling</p>
        </header>

        <div class="app-layout">
            
            <!-- Left Panel: Inputs -->
            <aside class="input-panel">
                
                <!-- Match Info -->
                <div class="section">
                    <h3>Match Info</h3>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Home Team</label>
                            <input type="text" id="homeTeam" value="Home Team">
                        </div>
                        <div class="input-group">
                            <label>Away Team</label>
                            <input type="text" id="awayTeam" value="Away Team">
                        </div>
                    </div>
                </div>

                <!-- Input Mode -->
                <div class="section">
                    <h3>Input Mode</h3>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="inputMode" value="xg" checked>
                            Mode A: xG Inputs
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="inputMode" value="sup">
                            Mode B: Supremacy & Total
                        </label>
                    </div>

                    <!-- Mode A Inputs -->
                    <div id="modeA-container" class="mode-container active">
                        <div class="input-row">
                            <div class="input-group">
                                <label>Home xG (λ)</label>
                                <input type="number" id="xgHome" step="0.01" value="1.60">
                            </div>
                            <div class="input-group">
                                <label>Away xG (λ)</label>
                                <input type="number" id="xgAway" step="0.01" value="1.10">
                            </div>
                        </div>
                    </div>

                    <!-- Mode B Inputs -->
                    <div id="modeB-container" class="mode-container">
                        <div class="input-row">
                            <div class="input-group">
                                <label title="Exp. Home Goals - Exp. Away Goals">Supremacy</label>
                                <input type="number" id="supremacy" step="0.01" value="0.50">
                            </div>
                            <div class="input-group">
                                <label title="Total Expected Goals">Total Exp.</label>
                                <input type="number" id="expectancy" step="0.01" value="2.70">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Model Parameters -->
                <div class="section">
                    <h3>Model Parameters</h3>
                    
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="useZip"> Use Zero-Inflated Model
                        </label>
                    </div>

                    <div id="zip-inputs" class="input-row disabled">
                        <div class="input-group">
                            <label>Home π (0-1)</label>
                            <input type="number" id="piHome" step="0.01" min="0" max="1" value="0.00" disabled>
                        </div>
                        <div class="input-group">
                            <label>Away π (0-1)</label>
                            <input type="number" id="piAway" step="0.01" min="0" max="1" value="0.00" disabled>
                        </div>
                    </div>

                    <div class="input-group" style="margin-top: 10px;">
                        <label title="Proportion of goals expected in 1st Half (Rest in 2nd)">1st Half Scaling Factor</label>
                        <input type="number" id="halfFactor" step="0.01" min="0.3" max="0.7" value="0.45">
                    </div>
                </div>

                <!-- Margin -->
                <div class="section">
                    <h3>Margins (%)</h3>
                    <div class="input-group">
                        <label>Full Time</label>
                        <input type="number" id="marginFull" step="0.5" value="6.0">
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>1st Half</label>
                            <input type="number" id="marginH1" step="0.5" value="8.0">
                        </div>
                        <div class="input-group">
                            <label>2nd Half</label>
                            <input type="number" id="marginH2" step="0.5" value="8.0">
                        </div>
                    </div>
                </div>

                <!-- Error Display -->
                <div id="error-box" class="error-box hidden"></div>

                <button id="calcBtn" class="primary-btn">Calculate</button>

            </aside>

            <!-- Right Panel: Results -->
            <main class="results-panel">
                
                <!-- Key Markets Summary -->
                <div class="summary-card">
                    <div class="market-column">
                        <h4>1X2 (Full Time)</h4>
                        <div id="summary-1x2" class="market-list"></div>
                    </div>
                    <div class="market-column">
                        <h4>Over/Under 2.5 (Full Time)</h4>
                        <div id="summary-ou" class="market-list"></div>
                    </div>
                    <div class="market-column">
                        <h4>BTTS (Full Time)</h4>
                        <div id="summary-btts" class="market-list"></div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="full">Full Time</button>
                    <button class="tab-btn" data-tab="h1">1st Half</button>
                    <button class="tab-btn" data-tab="h2">2nd Half</button>
                </div>

                <!-- Tab Content: Full Time -->
                <div id="tab-full" class="tab-content active">
                    <!-- Correct Score Grid Section -->
                    <div class="cs-grid-container">
                        <h5>Correct Score Grid (Full Time)</h5>
                        <div class="warning-text" id="warning-full"></div>
                        <div class="table-scroll">
                            <table id="cs-grid-full" class="cs-table"></table>
                        </div>

                        <!-- Custom Selection Panel -->
                        <div id="selection-panel-full" class="selection-panel hidden">
                            <div class="sel-header">
                                <span class="sel-title">Custom Selection (<span id="sel-count-full">0</span>)</span>
                                <button class="clear-btn" onclick="clearSelection('full')">Clear</button>
                            </div>
                            <div class="sel-stats">
                                <div class="sel-stat-item">
                                    <span class="stat-label">Total Prob:</span>
                                    <span class="stat-value" id="sel-prob-full">0.00%</span>
                                </div>
                                <div class="sel-stat-item">
                                    <span class="stat-label">Fair Odds:</span>
                                    <span class="stat-value" id="sel-fair-full">-</span>
                                </div>
                                <div class="sel-stat-item">
                                    <span class="stat-label">Market Odds:</span>
                                    <span class="stat-value highlight" id="sel-market-full">-</span>
                                </div>
                            </div>
                            <div class="sel-list" id="sel-list-full"></div>
                        </div>
                    </div>

                    <!-- Additional Markets Section -->
                    <div class="markets-section">
                        <h4 class="section-title">Additional Markets</h4>

                        <div class="markets-grid">
                            <!-- Basic Markets Card -->
                            <div class="market-card">
                                <h6 class="card-title">Basic Markets</h6>
                                <div id="basic-markets-full"></div>
                            </div>

                            <!-- Halftime/Full Time Card -->
                            <div class="market-card">
                                <h6 class="card-title">Halftime / Full Time</h6>
                                <div id="htft-markets-full"></div>
                            </div>

                            <!-- Double Chance + Goals Card -->
                            <div class="market-card">
                                <h6 class="card-title">Double Chance + Goals</h6>
                                <div id="dc-goals-full"></div>
                            </div>

                            <!-- Result + Goals Card -->
                            <div class="market-card">
                                <h6 class="card-title">Result + Goals</h6>
                                <div id="result-goals-full"></div>
                            </div>

                            <!-- Exact Goals Card -->
                            <div class="market-card">
                                <h6 class="card-title">Exact Total Goals</h6>
                                <table id="goals-full" class="simple-table"></table>
                            </div>

                            <!-- Scores by Goals Card -->
                            <div class="market-card wide">
                                <h6 class="card-title">Final Scores by Total Goals</h6>
                                <div id="scores-by-goals-full" class="scores-breakdown"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: 1st Half -->
                <div id="tab-h1" class="tab-content">
                    <div class="market-grid-layout">
                        <div class="grid-section">
                            <h5>Correct Score Grid (1st Half)</h5>
                            <div class="warning-text" id="warning-h1"></div>
                            <div class="table-scroll">
                                <table id="cs-grid-h1" class="cs-table"></table>
                            </div>

                            <!-- Custom Selection Panel -->
                            <div id="selection-panel-h1" class="selection-panel hidden">
                                <div class="sel-header">
                                    <span class="sel-title">Custom Selection (<span id="sel-count-h1">0</span>)</span>
                                    <button class="clear-btn" onclick="clearSelection('h1')">Clear</button>
                                </div>
                                <div class="sel-stats">
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Total Prob:</span>
                                        <span class="stat-value" id="sel-prob-h1">0.00%</span>
                                    </div>
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Fair Odds:</span>
                                        <span class="stat-value" id="sel-fair-h1">-</span>
                                    </div>
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Market Odds:</span>
                                        <span class="stat-value highlight" id="sel-market-h1">-</span>
                                    </div>
                                </div>
                                <div class="sel-list" id="sel-list-h1"></div>
                            </div>
                        </div>
                        <div class="side-markets">
                            <h5>Half Time Markets</h5>
                            <div id="markets-h1" class="market-dump"></div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: 2nd Half -->
                <div id="tab-h2" class="tab-content">
                    <div class="market-grid-layout">
                        <div class="grid-section">
                            <h5>Correct Score Grid (2nd Half)</h5>
                            <div class="warning-text" id="warning-h2"></div>
                            <div class="table-scroll">
                                <table id="cs-grid-h2" class="cs-table"></table>
                            </div>

                            <!-- Custom Selection Panel -->
                            <div id="selection-panel-h2" class="selection-panel hidden">
                                <div class="sel-header">
                                    <span class="sel-title">Custom Selection (<span id="sel-count-h2">0</span>)</span>
                                    <button class="clear-btn" onclick="clearSelection('h2')">Clear</button>
                                </div>
                                <div class="sel-stats">
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Total Prob:</span>
                                        <span class="stat-value" id="sel-prob-h2">0.00%</span>
                                    </div>
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Fair Odds:</span>
                                        <span class="stat-value" id="sel-fair-h2">-</span>
                                    </div>
                                    <div class="sel-stat-item">
                                        <span class="stat-label">Market Odds:</span>
                                        <span class="stat-value highlight" id="sel-market-h2">-</span>
                                    </div>
                                </div>
                                <div class="sel-list" id="sel-list-h2"></div>
                            </div>
                        </div>
                        <div class="side-markets">
                            <h5>2nd Half Markets</h5>
                            <div id="markets-h2" class="market-dump"></div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
